{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["\n/**\n * index.js\n *\n * a request API compatible with window.fetch\n */\n\nvar parse_url = require('url').parse;\nvar resolve_url = require('url').resolve;\nvar http = require('http');\nvar https = require('https');\nvar zlib = require('zlib');\nvar stream = require('stream');\n\nvar Body = require('./lib/body');\nvar Response = require('./lib/response');\nvar Headers = require('./lib/headers');\nvar Request = require('./lib/request');\nvar FetchError = require('./lib/fetch-error');\n\n// commonjs\nmodule.exports = Fetch;\n// es6 default export compatibility\nmodule.exports.default = module.exports;\n\n/**\n * Fetch class\n *\n * @param   Mixed    url   Absolute url or Request instance\n * @param   Object   opts  Fetch options\n * @return  Promise\n */\nfunction Fetch(url, opts) {\n\n\t// allow call as function\n\tif (!(this instanceof Fetch))\n\t\treturn new Fetch(url, opts);\n\n\t// allow custom promise\n\tif (!Fetch.Promise) {\n\t\tthrow new Error('native promise missing, set Fetch.Promise to your favorite alternative');\n\t}\n\n\tBody.Promise = Fetch.Promise;\n\n\tvar self = this;\n\n\t// wrap http.request into fetch\n\treturn new Fetch.Promise(function(resolve, reject) {\n\t\t// build request object\n\t\tvar options = new Request(url, opts);\n\n\t\tif (!options.protocol || !options.hostname) {\n\t\t\tthrow new Error('only absolute urls are supported');\n\t\t}\n\n\t\tif (options.protocol !== 'http:' && options.protocol !== 'https:') {\n\t\t\tthrow new Error('only http(s) protocols are supported');\n\t\t}\n\n\t\tvar send;\n\t\tif (options.protocol === 'https:') {\n\t\t\tsend = https.request;\n\t\t} else {\n\t\t\tsend = http.request;\n\t\t}\n\n\t\t// normalize headers\n\t\tvar headers = new Headers(options.headers);\n\n\t\tif (options.compress) {\n\t\t\theaders.set('accept-encoding', 'gzip,deflate');\n\t\t}\n\n\t\tif (!headers.has('user-agent')) {\n\t\t\theaders.set('user-agent', 'node-fetch/1.0 (+https://github.com/bitinn/node-fetch)');\n\t\t}\n\n\t\tif (!headers.has('connection') && !options.agent) {\n\t\t\theaders.set('connection', 'close');\n\t\t}\n\n\t\tif (!headers.has('accept')) {\n\t\t\theaders.set('accept', '*/*');\n\t\t}\n\n\t\t// detect form data input from form-data module, this hack avoid the need to pass multipart header manually\n\t\tif (!headers.has('content-type') && options.body && typeof options.body.getBoundary === 'function') {\n\t\t\theaders.set('content-type', 'multipart/form-data; boundary=' + options.body.getBoundary());\n\t\t}\n\n\t\t// bring node-fetch closer to browser behavior by setting content-length automatically\n\t\tif (!headers.has('content-length') && /post|put|patch|delete/i.test(options.method)) {\n\t\t\tif (typeof options.body === 'string') {\n\t\t\t\theaders.set('content-length', Buffer.byteLength(options.body));\n\t\t\t// detect form data input from form-data module, this hack avoid the need to add content-length header manually\n\t\t\t} else if (options.body && typeof options.body.getLengthSync === 'function') {\n\t\t\t\t// for form-data 1.x\n\t\t\t\tif (options.body._lengthRetrievers && options.body._lengthRetrievers.length == 0) {\n\t\t\t\t\theaders.set('content-length', options.body.getLengthSync().toString());\n\t\t\t\t// for form-data 2.x\n\t\t\t\t} else if (options.body.hasKnownLength && options.body.hasKnownLength()) {\n\t\t\t\t\theaders.set('content-length', options.body.getLengthSync().toString());\n\t\t\t\t}\n\t\t\t// this is only necessary for older nodejs releases (before iojs merge)\n\t\t\t} else if (options.body === undefined || options.body === null) {\n\t\t\t\theaders.set('content-length', '0');\n\t\t\t}\n\t\t}\n\n\t\toptions.headers = headers.raw();\n\n\t\t// http.request only support string as host header, this hack make custom host header possible\n\t\tif (options.headers.host) {\n\t\t\toptions.headers.host = options.headers.host[0];\n\t\t}\n\n\t\t// send request\n\t\tvar req = send(options);\n\t\tvar reqTimeout;\n\n\t\tif (options.timeout) {\n\t\t\treq.once('socket', function(socket) {\n\t\t\t\treqTimeout = setTimeout(function() {\n\t\t\t\t\treq.abort();\n\t\t\t\t\treject(new FetchError('network timeout at: ' + options.url, 'request-timeout'));\n\t\t\t\t}, options.timeout);\n\t\t\t});\n\t\t}\n\n\t\treq.on('error', function(err) {\n\t\t\tclearTimeout(reqTimeout);\n\t\t\treject(new FetchError('request to ' + options.url + ' failed, reason: ' + err.message, 'system', err));\n\t\t});\n\n\t\treq.on('response', function(res) {\n\t\t\tclearTimeout(reqTimeout);\n\n\t\t\t// handle redirect\n\t\t\tif (self.isRedirect(res.statusCode) && options.redirect !== 'manual') {\n\t\t\t\tif (options.redirect === 'error') {\n\t\t\t\t\treject(new FetchError('redirect mode is set to error: ' + options.url, 'no-redirect'));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (options.counter >= options.follow) {\n\t\t\t\t\treject(new FetchError('maximum redirect reached at: ' + options.url, 'max-redirect'));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!res.headers.location) {\n\t\t\t\t\treject(new FetchError('redirect location header missing at: ' + options.url, 'invalid-redirect'));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// per fetch spec, for POST request with 301/302 response, or any request with 303 response, use GET when following redirect\n\t\t\t\tif (res.statusCode === 303\n\t\t\t\t\t|| ((res.statusCode === 301 || res.statusCode === 302) && options.method === 'POST'))\n\t\t\t\t{\n\t\t\t\t\toptions.method = 'GET';\n\t\t\t\t\tdelete options.body;\n\t\t\t\t\tdelete options.headers['content-length'];\n\t\t\t\t}\n\n\t\t\t\toptions.counter++;\n\n\t\t\t\tresolve(Fetch(resolve_url(options.url, res.headers.location), options));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// normalize location header for manual redirect mode\n\t\t\tvar headers = new Headers(res.headers);\n\t\t\tif (options.redirect === 'manual' && headers.has('location')) {\n\t\t\t\theaders.set('location', resolve_url(options.url, headers.get('location')));\n\t\t\t}\n\n\t\t\t// prepare response\n\t\t\tvar body = res.pipe(new stream.PassThrough());\n\t\t\tvar response_options = {\n\t\t\t\turl: options.url\n\t\t\t\t, status: res.statusCode\n\t\t\t\t, statusText: res.statusMessage\n\t\t\t\t, headers: headers\n\t\t\t\t, size: options.size\n\t\t\t\t, timeout: options.timeout\n\t\t\t};\n\n\t\t\t// response object\n\t\t\tvar output;\n\n\t\t\t// in following scenarios we ignore compression support\n\t\t\t// 1. compression support is disabled\n\t\t\t// 2. HEAD request\n\t\t\t// 3. no content-encoding header\n\t\t\t// 4. no content response (204)\n\t\t\t// 5. content not modified response (304)\n\t\t\tif (!options.compress || options.method === 'HEAD' || !headers.has('content-encoding') || res.statusCode === 204 || res.statusCode === 304) {\n\t\t\t\toutput = new Response(body, response_options);\n\t\t\t\tresolve(output);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// otherwise, check for gzip or deflate\n\t\t\tvar name = headers.get('content-encoding');\n\n\t\t\t// for gzip\n\t\t\tif (name == 'gzip' || name == 'x-gzip') {\n\t\t\t\tbody = body.pipe(zlib.createGunzip());\n\t\t\t\toutput = new Response(body, response_options);\n\t\t\t\tresolve(output);\n\t\t\t\treturn;\n\n\t\t\t// for deflate\n\t\t\t} else if (name == 'deflate' || name == 'x-deflate') {\n\t\t\t\t// handle the infamous raw deflate response from old servers\n\t\t\t\t// a hack for old IIS and Apache servers\n\t\t\t\tvar raw = res.pipe(new stream.PassThrough());\n\t\t\t\traw.once('data', function(chunk) {\n\t\t\t\t\t// see http://stackoverflow.com/questions/37519828\n\t\t\t\t\tif ((chunk[0] & 0x0F) === 0x08) {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflate());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflateRaw());\n\t\t\t\t\t}\n\t\t\t\t\toutput = new Response(body, response_options);\n\t\t\t\t\tresolve(output);\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// otherwise, use response as-is\n\t\t\toutput = new Response(body, response_options);\n\t\t\tresolve(output);\n\t\t\treturn;\n\t\t});\n\n\t\t// accept string, buffer or readable stream as body\n\t\t// per spec we will call tostring on non-stream objects\n\t\tif (typeof options.body === 'string') {\n\t\t\treq.write(options.body);\n\t\t\treq.end();\n\t\t} else if (options.body instanceof Buffer) {\n\t\t\treq.write(options.body);\n\t\t\treq.end();\n\t\t} else if (typeof options.body === 'object' && options.body.pipe) {\n\t\t\toptions.body.pipe(req);\n\t\t} else if (typeof options.body === 'object') {\n\t\t\treq.write(options.body.toString());\n\t\t\treq.end();\n\t\t} else {\n\t\t\treq.end();\n\t\t}\n\t});\n\n};\n\n/**\n * Redirect code matching\n *\n * @param   Number   code  Status code\n * @return  Boolean\n */\nFetch.prototype.isRedirect = function(code) {\n\treturn code === 301 || code === 302 || code === 303 || code === 307 || code === 308;\n}\n\n// expose Promise\nFetch.Promise = global.Promise;\nFetch.Response = Response;\nFetch.Headers = Headers;\nFetch.Request = Request;\n"]}